{
    "swagger": "2.0",
    "info": {
        "title": "MAIA-LAB API",
        "description": "MAIA-LAB  REST API - internal and external",
        "version": "4",
        "x-ISC_Namespace": "MAIA"
    },
    "host": "localhost",
    "basePath": "/api/maia-lab/v4",
    "schemes": [
        "http"
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "securityDefinitions": {
      "basicAuth": {
        "type": "basic"
      }
    },
    "security":[{
      "basicAuth" : []
    }],
    "paths": {
        "/worklist-patients-today": {
            "get": {
                "operationId": "WorklistPatientsToday",
                "description": "External API: get patient worklist from EHR-S/PAM for today",
                "x-ISC_ServiceMethod": "Worklist",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "location",
                        "in": "query",
                        "required": false,
                        "type": "string",
                        "description": "Location where device is located, for which patient worklist shall be retrieved from EMR/PAM system."
                    }
                ],
                "responses": {
                    "default": {
                        "description": "(Unexpected Error)"
                    },
                    "200": {
                        "description": "(Expected Result)",
                        "schema": {
                          "type": "object",
                          "required": ["patients"],
                          "properties": {
                            "uuid": {
                              "type":"string",
                              "format":"uuid"
                            },
                            "status": {
                              "type": "integer"
                            },
                            "patients": {
                              "type": "array",
                              "description": "array of patient ids (in system)",
                              "items": {
                                "type": "string",
                                "example": "6665554442"
                              }
                            }
                          }
                        }
                    }
                }
            }
        },
        "/patient/{patientId}": {
          "get": {
            "operationId": "PatientById",
            "description": "Patient infomration retrieved by its ID in system",
            "produces": [
                    "application/json"
                ],
            "parameters": [
              {
                "name": "patientId",
                "in": "path",
                "type": "string",
                "required" : true
              }
              ],
              "responses": {
                    "default": {
                        "description": "(Unexpected Error)"
                    },
                    "200": {
                        "description": "(Expected Result)",
                        "schema": {
                          "$ref": "#/definitions/Patient"
                        }
                    }
                }
          }
        },
        "/report": {
            "post": {
                "operationId": "DiagnosticReport",
                "description": "External API: send textual form of diagnostic report to EHR-S",
                "x-ISC_ServiceMethod": "DiagnosticReport",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "report",
                        "in": "body",
                        "description": "Request body contents",
                        "required": false,
                        "schema": {
                          "$ref": "#/definitions/Report"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": "(Unexpected Error)"
                    },
                    "200": {
                        "description": "(Expected Result)"
                    }
                }
            }
        }
    },
    "definitions":{
      "Patient":{
        "description": "[NONFHIR] Demographics and other administrative information about an individual or animal receiving care or other health-related services.",
        "required": [ "id"],
        "properties": {
             "uuid": {
               "type": "string",
               "format": "uuid"
             },
             "mrn": {
               "type": "string"
             },
             "id": {
               "type": "string",
               "minLength": 1
             },
             "GivenName": {
               "type": "string"
             },
             "Surname": {
               "type": "string"
             },
             "AssigningAuthorityOID": {
               "type": "string"
             },
             "BirthDate": {
              "type": "string"
             },
             "Age": {
               "type": "integer",
               "format": "int32"
             }

        }
      },
      "Report":{
        "description": "The diagnostic report sent to the hospital system",
        "required": ["id", "patientId"],
        "properties": {
          "id": {
            "description": "The Id of the report",
            "type" : "string",
            "minLength": 1

          },
          "uuid": {
            "description": "Optional Id in UUID format of the report",
            "type" : "string",
            "format": "uuid"
          },
          "patientId": {
            "description": "The Id of the patient that was examined",
            "type" : "string",
            "minLength": 1
          },
          "practitionerId": {
            "description": "The Id of the practitioner who performed the examination",
            "type" : "string"
          },
          "reportText": {
            "description": "The text description what was done - the report itself",
            "type" : "string"
          },
          "references": {
            "description": "The references to other data - images, videos, etc. Can be url or just description where to find them",
            "type": "array",
            "items": {
              "description": "single reference to other data related to this report",
              "type": "string"
            }
          },
          "reportStatus": {
            "description": "The status of the report - Final? Preliminary? Draft? Testing-only?",
             "type": "string"
          },
          "additionalComment": {
            "description": "Optional string field, where you can put pretty much anything - feedback, comment, metadata",
            "type" : "string"
          },
          "issueDate": {
            "description": "Date when this report was issued",
            "type": "string",
            "format": "date-time"
          }
        }
      }


    }
}